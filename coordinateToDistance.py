# -*- coding: utf-8 -*-
# @Time    : 2019/8/20 19:51
# @Author  : SDYL
# @Email   : sdyl_1020@163.com
# @File    : coordinateToDistance.py
# @Software: PyCharm

# 坐标矩阵转换成距离矩阵
import numpy as np
from math import radians, cos, sin, asin, sqrt


coordinates = np.array([[114.46808344237517, 30.478970984802025],
                        [114.47639797851443, 30.479801946855826],
                        [114.51691398243930, 30.502559886294076],
                        [114.34107222843812, 30.552020141989040],
                        [114.42404990942926, 30.513554865461150],
                        [114.36342797588510, 30.609978772185380],
                        [114.38468996900077, 30.524791920487505],
                        [114.43614020149144, 30.451546902652980],
                        [114.36410502874799, 30.542790918198037],
                        [114.47150551385948, 30.509687360872665],
                        [114.42295235796055, 30.499156266447830],
                        [114.40468202761699, 30.654607872655110],
                        [115.90546602605970, 28.691259179775223],
                        [114.38342344806226, 30.583527043982240],
                        [114.32159879842335, 30.444275818793837],
                        [114.29897198908536, 30.363753454794224],
                        [114.32855126446022, 30.381564218182020],
                        [114.32159879842335, 30.444275818793837],
                        [114.27662426530317, 30.606708886863313],
                        [114.14345873785965, 30.625919818109203],
                        [114.30593496350006, 30.628057443060560],
                        [114.26649479181326, 30.583002315848162],
                        [114.57295558015424, 30.663021871926414],
                        [114.28158255239606, 30.592892408190057],
                        [114.24824984848172, 30.583761228088562],
                        [114.18118253876786, 30.507715601296720],
                        [114.03547963081321, 30.588113621855484],
                        [114.09378495841330, 30.466055935344050],
                        [114.12456416520000, 30.393830953900000],
                        [114.25207501300429, 30.556471942929193],
                        [114.09273070706679, 30.465018205131010],
                        [114.09151485055902, 30.314809120144606],
                        [114.16314959463837, 30.524049582175184],
                        [114.17976759530144, 30.505550127197480],
                        [114.28731332832918, 30.55371833694141]])

def geodistance(lng1, lat1, lng2, lat2):
    lng1, lat1, lng2, lat2 = map(radians, [lng1, lat1, lng2, lat2])
    dlon = lng2-lng1
    dlat = lat2-lat1
    a = sin(dlat/2)**2 + cos(lat1) * cos(lat2) * sin(dlon/2)**2
    dis = 2*asin(sqrt(a))*6371*1000
    return dis

# for i in range(35):
#     for j in range(1):
#         print(coordinates[i][j])
#         geodistance(coordinates[i][j],)

# def getdistmat(coordinates):
#     num = coordinates.shape[0]
#     distmat = np.zeros((35, 35))
#     for i in range(num):
#         for j in range(i, num):
#             distmat[i][j] = distmat[j][i] = geodistance(coordinates[i][j])
#     return distmat

print(geodistance(114.46808344237517, 30.478970984802025, 114.47639797851443, 30.479801946855826))